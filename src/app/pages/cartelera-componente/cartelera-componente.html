<div class="content-header row">
  <div class="content-header-left col-md-12 col-12 mb-2">
    <div class="d-flex align-items-center">
      <h2 class="content-header-title float-start mb-0">Cartelera</h2>
    </div>
    <p class="text-muted mt-50">Explora las películas en cartelera.</p>
  </div>
</div>

<div class="content-body">
  <div *ngIf="cargando()" class="card">
    <div class="card-body d-flex align-items-center">
      <div class="spinner-border text-primary me-1" role="status" aria-hidden="true"></div>
      <span>Cargando películas...</span>
    </div>
  </div>

  <div *ngIf="error()" class="alert alert-danger" role="alert">
    {{ error() }}
  </div>

  <div *ngIf="!cargando() && !error() && peliculas().length === 0" class="card">
    <div class="card-body">
      <p class="mb-0 text-center text-muted">No hay películas para mostrar.</p>
    </div>
  </div>

  <div *ngIf="peliculas().length > 0" class="row match-height">
    <div class="col-xl-3 col-lg-4 col-md-6 col-sm-12" *ngFor="let p of peliculas()">
      <div class="card card-profile">
        <img class="img-fluid card-img-top" [src]="posterDe(p)" [alt]="p.titulo || 'Poster'">
        <div class="card-body">
          <h4 class="card-title mb-25">{{ p.titulo }}</h4>
          <div class="d-flex align-items-center flex-wrap mb-50">
            <span class="badge rounded-pill badge-light-primary me-50" *ngIf="p.genero">{{ p.genero }}</span>
            <span class="badge rounded-pill badge-light-warning" *ngIf="p.calificacion">★ {{ p.calificacion }}</span>
          </div>
          <p class="card-text text-truncate-3">
            {{ p.descripcion || 'Sin descripción disponible.' }}
          </p>
          <div class="d-flex justify-content-between align-items-center mt-1">
            <small class="text-muted" *ngIf="p.fechaEstreno">Estreno: {{ p.fechaEstreno | date:'mediumDate' }}</small>
            <a class="btn btn-sm btn-outline-primary waves-effect">Ver detalles</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
